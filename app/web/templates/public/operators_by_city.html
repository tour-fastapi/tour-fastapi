{% extends "base.html" %}
{% block title %}Operators in {{ city }}{% endblock %}
{% block content %}
{% import "shared/_macros.html" as ui %}

<main class="page">
  <!-- Header -->
  <header class="page-header">
    <a href="/umrah_operators" class="page-back">
      ← Back to operators
    </a>

    <div class="page-title-wrap">
      <h1 class="page-title">
        Umrah Operators in {{ city }}
      </h1>

      <span class="page-count">
        {{ count }} operator{{ 's' if count != 1 else '' }}
      </span>
    </div>
  </header>
  <!-- Operators List -->
  {% if agencies and agencies|length > 0 %}
    <section class="operator-list">
      {% for a in agencies %}
        <a
          href="/umrah_operators/{{ a.registration_id }}"
          class="operator-card"
        >
          <!-- Avatar -->
          <div class="operator-avatar" data-seed="{{ (a.agencies_name or 'X')|lower }}">
            {{ ui.agency_badge(a, 56, True) }}
          </div>

          <!-- Content -->
          <div class="operator-body">
            <h2 class="operator-name">
              {{ a.agencies_name }}
            </h2>

            <p class="operator-location">
              {{ a.city or '-' }}, {{ a.country or '-' }}
            </p>

            {% if a.description %}
              <p class="operator-description">
                {{ a.description }}
              </p>
            {% endif %}

            {% if a.min_package_price %}
              <p class="operator-meta">
                Packages from <strong>₹ {{ a.min_package_price }}</strong>
              </p>
            {% endif %}
          </div>
        </a>
      {% endfor %}
    </section>
  {% else %}
    <div class="empty-state">
      No operators found in {{ city }}.
    </div>
  {% endif %}
  
</main>
{% endblock %}
