{% extends "base.html" %}
{% block title %}Operators in {{ city }}{% endblock %}
{% block content %}
{% import "shared/_macros.html" as ui %}

<main class="page">
  <!-- Header -->
  <header class="page-header">
    <a href="/umrah_operators" class="page-back">
      ‚Üê Back to operators
    </a>

    <div class="page-title-wrap">
      <div>
      <h1 class="page-title">
        Umrah Operators in {{ city }}
      </h1>
      <p class="page-subtitle">
        Verified Umrah tour operators serving {{ city }}
      </p>
      </div>

      <span class="page-count">
        {{ count }} operator{{ 's' if count != 1 else '' }}
      </span>
    </div>
  </header>
  <!-- Operators List -->
  {% if agencies and agencies|length > 0 %}
    <section class="operator-list">
      {% for a in agencies %}
        <a
          href="/umrah_operators/{{ a.registration_id }}"
          class="operator-card entity-card"
        >
          <!-- Avatar -->
          <div class="operator-avatar" data-tone="{{ (loop.index0 + (a.agencies_name|length)) % 12 }}">
            {{ ui.agency_badge(a, 56, True) }}
          </div>

          <!-- Content -->
          <div class="operator-body">
            <h2 class="operator-name">
              {{ a.agencies_name }}
            </h2>

            <p class="operator-location">
              {{ a.city or '-' }}, {{ a.country or '-' }}
            </p>

            {% if a.description %}
              <p class="operator-description">
                {{ a.description }}
              </p>
            {% endif %}

            <div class="operator-meta-primary">
              <span class="meta-item">
                <span class="meta-icon">üì¶</span>
                <span>3 upcoming packages</span>
              </span>

              <span class="meta-sep">‚Ä¢</span>

              <span class="meta-item">
                <span>Starting from ‚Çπ45,000</span>
              </span>

              <span class="meta-sep">‚Ä¢</span>

              <span class="meta-item">
                <span class="meta-icon">‚≠ê</span>
                <span>4.6</span>
              </span>
            </div>
            <div class="operator-meta-primary operator-meta-muted is-hidden">
              <span>No upcoming packages</span>
            </div>
            <div class="operator-meta-secondary">
              <span>In business since 2019</span>
              <span class="meta-sep">‚Ä¢</span>
              <span>120+ tours</span>
              <span class="meta-sep">‚Ä¢</span>
              <span>3,500+ pilgrims</span>
            </div>


            {% if a.min_package_price %}
              <p class="operator-meta">
                Packages from <strong>‚Çπ {{ a.min_package_price }}</strong>
              </p>
            {% endif %}
          </div>
        </a>
      {% endfor %}
    </section>
  {% else %}
    <div class="empty-state">
      No operators found in {{ city }}.
    </div>
  {% endif %}
  
</main>
{% endblock %}
