{# app/web/templates/package/themes/premium_aurora.html #}

<style>
  /* ========== AURORA (Simplified Flagship) ========== */
  .theme-aurora {
    --bg: #060b18;
    --fg: #f5f7ff;
    --muted: #9aa4c6;
    --card: #0b1224;
    --card-soft: #101730;
    --border: #222b4a;
    --hair: rgba(255, 255, 255, 0.06);
    --chip: rgba(255, 255, 255, 0.06);
    --chip-border: rgba(255, 255, 255, 0.12);
    --accent: #a9c5ff;
    --accent-2: #7dd3ff;
    --radius: 16px;
    --shadow-lg: 0 18px 40px rgba(0, 0, 0, 0.55);
  }

  .theme-aurora {
    color: var(--fg);
    background: radial-gradient(circle at top, #151c3b 0, #050816 55%, #020411 100%);
    border-radius: 20px;
    padding: 18px;
  }

  .theme-aurora .hero {
    border-radius: var(--radius);
    padding: 18px 18px 16px;
    background: linear-gradient(145deg, #101935, #060b18);
    border: 1px solid var(--border);
    box-shadow: var(--shadow-lg);
  }

  .theme-aurora .hero-header {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    align-items: flex-start;
  }

  .theme-aurora .chip {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.7rem;
    border-radius: 999px;
    background: var(--chip);
    border: 1px solid var(--chip-border);
    font-size: 0.76rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
  }

  .theme-aurora .kicker {
    font-size: 0.8rem;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--muted);
  }

  .theme-aurora .muted {
    color: var(--muted);
  }

  .theme-aurora .price-lg {
    font-size: clamp(28px, 3.5vw, 38px);
    font-weight: 800;
    letter-spacing: -0.02em;
  }

  .theme-aurora .img-brd {
    border-radius: 14px;
    border: 1px solid var(--border);
    background: #020411;
    padding: 4px;
  }

  .theme-aurora .card-soft {
    background: var(--card-soft);
    border-radius: var(--radius);
    border: 1px solid var(--border);
    padding: 1rem 1.1rem;
  }

  .theme-aurora .block {
    border-radius: 12px;
    border: 1px dashed var(--hair);
    padding: 0.8rem 0.9rem;
    background: rgba(4, 8, 24, 0.7);
  }

  .theme-aurora a {
    color: var(--accent-2);
    text-decoration: none;
  }

  .theme-aurora a:hover {
    text-decoration: underline;
  }

  .theme-aurora .section-title {
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: var(--muted);
    margin-bottom: 0.75rem;
  }

  .theme-aurora .btn-primary {
    background: linear-gradient(90deg, #7dd3ff, #a9c5ff);
    color: #020617;
    border: none;
    border-radius: 999px;
    padding: 0.55rem 1.25rem;
    font-weight: 600;
    font-size: 0.9rem;
    box-shadow: 0 0 20px rgba(124, 181, 255, 0.35);
    transition: transform 0.12s ease, box-shadow 0.12s ease;
  }

  .theme-aurora .btn-primary:hover {
    transform: translateY(-1px);
    box-shadow: 0 0 26px rgba(169, 197, 255, 0.6);
  }

  @media (max-width: 767.98px) {
    .theme-aurora {
      padding: 12px;
    }
    .theme-aurora .hero {
      padding: 14px;
    }
  }
</style>

<div class="theme-aurora">
  {# Month name helper #}
  {% set month_names = {
    1:'January', 2:'February', 3:'March', 4:'April', 5:'May', 6:'June',
    7:'July', 8:'August', 9:'September', 10:'October', 11:'November', 12:'December'
  } %}

  <!-- Header / Hero -->
  <div class="hero mb-4">
    <div class="hero-header">
      <img src="/media/agency/{{ agency.registration_id }}/logo"
           alt="{{ agency.agencies_name }} logo"
           width="60" height="60"
           class="img-brd"
           onerror="this.style.display='none'"/>

      <div class="flex-grow-1">
        <div class="d-flex flex-wrap align-items-center gap-2 mb-1">
          <h1 class="h5 m-0">{{ pkg.package_name }}</h1>
          {% if pkg.package_type %}
            <span class="chip">{{ pkg.package_type | title }}</span>
          {% endif %}
          {% if pkg.package_class %}
            <span class="chip">{{ pkg.package_class | title }}</span>
          {% endif %}
        </div>

        <div class="small muted">
          {{ pkg.days }} days
          {% if pkg.travel_month or pkg.travel_year %}
            •
            {% if pkg.travel_month %}
              {{ month_names[pkg.travel_month] if pkg.travel_month in month_names else pkg.travel_month }}
            {% endif %}
            {% if pkg.travel_year %}
              {{ pkg.travel_year }}
            {% endif %}
          {% endif %}
          {% if agency and agency.agencies_name %}
            • {{ agency.agencies_name }}{% if agency.city %}, {{ agency.city }}{% endif %}
          {% endif %}
        </div>

        {% if pkg.description %}
          <div class="mt-2 small">
            {{ pkg.description }}
          </div>
        {% endif %}
      </div>

      <div class="text-end ms-auto">
        <div class="kicker mb-1">Starting from</div>
        <div class="price-lg">₹{{ "%.2f"|format(pkg.price or 0) }}</div>
        {% if price_row and (price_row.price_double or price_row.price_triple or price_row.price_quad) %}
          <div class="small muted mt-2">
            {% if price_row.price_double %}<div>Double: ₹{{ "%.2f"|format(price_row.price_double) }}</div>{% endif %}
            {% if price_row.price_triple %}<div>Triple: ₹{{ "%.2f"|format(price_row.price_triple) }}</div>{% endif %}
            {% if price_row.price_quad %}<div>Quad/Quint: ₹{{ "%.2f"|format(price_row.price_quad) }}</div>{% endif %}
          </div>
        {% endif %}

        <button type="button" class="btn btn-primary mt-3">
          Enquire about this package
        </button>
      </div>
    </div>
  </div>

  <!-- Main Grid -->
  <div class="row g-4">
    <!-- Left column -->
    <div class="col-lg-8">
      <!-- Flights -->
      <div class="card-soft mb-3">
        <div class="section-title">Flights</div>
        <div class="row g-3">
          <div class="col-md-6">
            <div class="block h-100">
              <div class="fw-semibold mb-1">Onward</div>
              <div class="small">{{ onward_text }}</div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="block h-100">
              <div class="fw-semibold mb-1">Return</div>
              <div class="small">{{ return_text }}</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Stays -->
      <div class="card-soft mb-3">
        <div class="section-title">Stays</div>
        <div class="row g-3">
          <!-- Mecca -->
          <div class="col-md-6">
            <div class="block h-100">
              <div class="fw-semibold mb-2">Mecca</div>

              <div class="small muted text-uppercase mb-1">Dates</div>
              <div class="small mb-2">{{ mecca_dates }}</div>

              <div class="small muted text-uppercase mb-1">Distance</div>
              <div class="small mb-2">{{ mecca_distance_label }}</div>

              <div class="small muted text-uppercase mb-1">Hotel</div>
              <div class="small">
                {% if mecca_hotel_name %}
                  {% if mecca_hotel_link %}
                    <a href="{{ mecca_hotel_link }}" target="_blank" rel="noopener">
                      {{ mecca_hotel_name }}
                    </a>
                  {% else %}
                    {{ mecca_hotel_name }}
                  {% endif %}
                {% else %}
                  —
                {% endif %}
              </div>
            </div>
          </div>

          <!-- Medinah -->
          <div class="col-md-6">
            <div class="block h-100">
              <div class="fw-semibold mb-2">Medinah</div>

              <div class="small muted text-uppercase mb-1">Dates</div>
              <div class="small mb-2">{{ med_dates }}</div>

              <div class="small muted text-uppercase mb-1">Distance</div>
              <div class="small mb-2">{{ med_distance_label }}</div>

              <div class="small muted text-uppercase mb-1">Hotel</div>
              <div class="small">
                {% if med_hotel_name %}
                  {% if med_hotel_link %}
                    <a href="{{ med_hotel_link }}" target="_blank" rel="noopener">
                      {{ med_hotel_name }}
                    </a>
                  {% else %}
                    {{ med_hotel_name }}
                  {% endif %}
                {% else %}
                  —
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Inclusions -->
      <div class="card-soft">
        <div class="section-title">Inclusions</div>
        {% set incl = pkg.inclusion %}
        <ul class="mb-0 small">
          {% if incl and (incl.meals_desc or incl.meals_enabled) %}
            <li><strong>Meals:</strong> {{ incl.meals_desc or "Included" }}</li>
          {% endif %}
          {% if incl and (incl.laundry_desc or incl.laundry_enabled) %}
            <li><strong>Laundry:</strong> {{ incl.laundry_desc or "Included" }}</li>
          {% endif %}
          {% if incl and (incl.transport_desc or incl.transport_enabled) %}
            <li><strong>Transport:</strong> {{ incl.transport_desc or "Included" }}</li>
          {% endif %}
          {% if incl and (incl.zamzam_desc or incl.zamzam_enabled) %}
            <li><strong>Zam Zam:</strong> {{ incl.zamzam_desc or "Included" }}</li>
          {% endif %}
          {% if incl and (incl.welcome_kit_desc or incl.welcome_kit_enabled) %}
            <li><strong>Welcome Kit:</strong> {{ incl.welcome_kit_desc or "Included" }}</li>
          {% endif %}
          {% if incl and (incl.insurance_desc or incl.insurance_enabled) %}
            <li><strong>Insurance:</strong> {{ incl.insurance_desc or "Included" }}</li>
          {% endif %}
          {% if incl and incl.other_notes %}
            <li>{{ incl.other_notes }}</li>
          {% endif %}
          {% if not incl %}
            <li>No inclusions listed for this package.</li>
          {% endif %}
        </ul>
      </div>
    </div>

    <!-- Right column -->
    <div class="col-lg-4">
      <div class="card-soft mb-3">
        <div class="section-title">Pricing Summary</div>
        <div class="price-lg mb-1">₹{{ "%.2f"|format(pkg.price or 0) }}</div>
        <div class="small muted mb-2">Base package price</div>

        <div class="small">
          {% if price_row and (price_row.price_double or price_row.price_triple or price_row.price_quad) %}
            {% if price_row.price_double %}
              <div><strong>Double / Couple:</strong> ₹{{ "%.2f"|format(price_row.price_double) }}</div>
            {% endif %}
            {% if price_row.price_triple %}
              <div><strong>Triple:</strong> ₹{{ "%.2f"|format(price_row.price_triple) }}</div>
            {% endif %}
            {% if price_row.price_quad %}
              <div><strong>Quad / Quint:</strong> ₹{{ "%.2f"|format(price_row.price_quad) }}</div>
            {% endif %}
          {% else %}
            <div>No variant-wise pricing captured.</div>
          {% endif %}
        </div>
      </div>

      <div class="card-soft">
        <div class="section-title">Operator</div>
        <div class="small">
          {% if agency and agency.agencies_name %}
            <div class="fw-semibold mb-1">{{ agency.agencies_name }}</div>
            {% if agency.city or agency.country %}
              <div class="muted mb-1">
                {% if agency.city %}{{ agency.city }}{% endif %}
                {% if agency.country %}{% if agency.city %}, {% endif %}{{ agency.country }}{% endif %}
              </div>
            {% endif %}
          {% else %}
            <div class="muted">Agency details not available.</div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
